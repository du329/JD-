{"remainingRequest":"C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\52919\\Desktop\\jd_lqs\\src\\views\\Login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\52919\\Desktop\\jd_lqs\\src\\views\\Login\\Login.vue","mtime":1653053816744},{"path":"C:\\Users\\52919\\Desktop\\jd_lqs\\babel.config.js","mtime":1592841393000},{"path":"C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650532020399},{"path":"C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\babel-loader\\lib\\index.js","mtime":1650532020621},{"path":"C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650532020399},{"path":"C:\\Users\\52919\\Desktop\\jd_lqs\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1650532023421}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzUyOTE5L0Rlc2t0b3AvamRfbHFzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICJ2dWUtcm91dGVyIjsgLy8g6Lev55Sx5o+S5Lu2CgppbXBvcnQgeyByZWFjdGl2ZSwgdG9SZWZzIH0gZnJvbSAiQHZ1ZS9yZWFjdGl2aXR5IjsKaW1wb3J0IHsgcG9zdCB9IGZyb20gIi4uLy4uL3V0aWxzL3JlcXVlc3QiOyAvLyBheGlvc+ivt+axguWHveaVsAoKaW1wb3J0IFRvYXN0LCB7IHVzZVRvYXN0RWZmZWN0IH0gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9Ub2FzdCI7IC8vIOiHquWumuS5ieW8ueeqlwovLyBpbXBvcnQgJ2FuaW1hdGUuY3NzJwovLyDlpITnkIbnmbvlvZUKCnZhciB1c2VMb2dpbkVmZmVjdCA9IGZ1bmN0aW9uIHVzZUxvZ2luRWZmZWN0KHNob3dUb2FzdCkgewogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgbG9naW5NZXNzYWdlID0gcmVhY3RpdmUoewogICAgdXNlcm5hbWU6ICIiLAogICAgcGFzc3dvcmQ6ICIiCiAgfSk7CgogIHZhciBfdG9SZWZzID0gdG9SZWZzKGxvZ2luTWVzc2FnZSksCiAgICAgIHVzZXJuYW1lID0gX3RvUmVmcy51c2VybmFtZSwKICAgICAgcGFzc3dvcmQgPSBfdG9SZWZzLnBhc3N3b3JkOwoKICB2YXIgaGFuZGxlTG9naW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBpZiAoISh1c2VybmFtZS52YWx1ZSA9PT0gJycpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgc2hvd1RvYXN0KCLor7fovpPlhaXnlKjmiLflkI0hIik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgaWYgKCEocGFzc3dvcmQudmFsdWUgPT09ICcnKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHNob3dUb2FzdCgi6K+36L6T5YWl5a+G56CBISIpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBwb3N0KCIvdXNlci9sb2dpbiIsIGxvZ2luTWVzc2FnZSk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKChyZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQuZXJybm8pID09PSAwKSB7CiAgICAgICAgICAgICAgICBzaG93VG9hc3QoIueZu+W9leaIkOWKnyEiKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgbmFtZTogIkhvbWUiCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSwgODAwKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc2hvd1RvYXN0KCLnmbvlvZXlpLHotKUhIik7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDYpOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICBzaG93VG9hc3QoIuivt+axguWksei0pSEiKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbNiwgMTNdXSk7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKCkgewogICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCk7CgogIHJldHVybiB7CiAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICBoYW5kbGVMb2dpbjogaGFuZGxlTG9naW4KICB9Owp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbiIsCiAgY29tcG9uZW50czogewogICAgVG9hc3Q6IFRvYXN0CiAgfSwKICAvLyBzZXR1cOeahOiBjOi0o++8muS6huino+S7o+eggeaJp+ihjOeahOS4gOS4qua1geeoiwogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBfdXNlVG9hc3RFZmZlY3QgPSB1c2VUb2FzdEVmZmVjdCgpLAogICAgICAgIHNob3cgPSBfdXNlVG9hc3RFZmZlY3Quc2hvdywKICAgICAgICBjb250ZW50ID0gX3VzZVRvYXN0RWZmZWN0LmNvbnRlbnQsCiAgICAgICAgc2hvd1RvYXN0ID0gX3VzZVRvYXN0RWZmZWN0LnNob3dUb2FzdDsKCiAgICB2YXIgX3VzZUxvZ2luRWZmZWN0ID0gdXNlTG9naW5FZmZlY3Qoc2hvd1RvYXN0KSwKICAgICAgICB1c2VybmFtZSA9IF91c2VMb2dpbkVmZmVjdC51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IF91c2VMb2dpbkVmZmVjdC5wYXNzd29yZCwKICAgICAgICBoYW5kbGVMb2dpbiA9IF91c2VMb2dpbkVmZmVjdC5oYW5kbGVMb2dpbjsKCiAgICByZXR1cm4gewogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgc2hvdzogc2hvdywKICAgICAgY29udGVudDogY29udGVudCwKICAgICAgaGFuZGxlTG9naW46IGhhbmRsZUxvZ2luCiAgICB9OwogIH0KfTs="},{"version":3,"mappings":";;AA0CA,SAASA,SAAT,QAA0B,YAA1B,C,CAAwC;;AACxC,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,iBAAjC;AACA,SAASC,IAAT,QAAqB,qBAArB,C,CAA4C;;AAC5C,OAAOC,KAAP,IAAgBC,cAAhB,QAAsC,wBAAtC,C,CAAgE;AAChE;AAEA;;AACA,IAAMC,cAAa,GAAI,SAAjBA,cAAiB,CAACC,SAAD,EAAe;AACpC,MAAMC,MAAK,GAAIR,SAAS,EAAxB;AACA,MAAMS,YAAW,GAAIR,QAAQ,CAAC;AAAES,YAAQ,EAAE,EAAZ;AAAgBC,YAAQ,EAAE;AAA1B,GAAD,CAA7B;;AACA,gBAA+BT,MAAM,CAACO,YAAD,CAArC;AAAA,MAAQC,QAAR,WAAQA,QAAR;AAAA,MAAkBC,QAAlB,WAAkBA,QAAlB;;AAEA,MAAMC,WAAU;AAAA,uEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGdF,QAAQ,CAACG,KAAT,KAAmB,EAHL;AAAA;AAAA;AAAA;;AAIhBN,uBAAS,CAAC,SAAD,CAAT;AAJgB;;AAAA;AAAA,oBAOdI,QAAQ,CAACE,KAAT,KAAmB,EAPL;AAAA;AAAA;AAAA;;AAQhBN,uBAAS,CAAC,QAAD,CAAT;AARgB;;AAAA;AAAA;AAAA;AAAA,qBAYKJ,IAAI,CAAC,aAAD,EAAgBM,YAAhB,CAZT;;AAAA;AAYVK,oBAZU;;AAahB,kBAAI,OAAM,SAAN,UAAM,WAAN,kBAAM,CAAEC,KAAR,MAAkB,CAAtB,EAAyB;AACvBR,yBAAS,CAAC,OAAD,CAAT;AACAS,4BAAY,CAACC,OAAb,GAAuB,IAAvB;AACAC,0BAAU,CAAC,YAAM;AACfV,wBAAM,CAACW,IAAP,CAAY;AAAEC,wBAAI,EAAE;AAAR,mBAAZ;AACD,iBAFS,EAEP,GAFO,CAAV;AAGF,eANA,MAMO;AACLb,yBAAS,CAAC,OAAD,CAAT;AACF;;AArBgB;AAAA;;AAAA;AAAA;AAAA;AAuBhBc,qBAAO,CAACC,GAAR;AACAf,uBAAS,CAAC,OAAD,CAAT;;AAxBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAVK,WAAU;AAAA;AAAA;AAAA,KAAhB;;AA2BA,SAAO;AAAEF,YAAQ,EAARA,QAAF;AAAYC,YAAQ,EAARA,QAAZ;AAAsBC,eAAU,EAAVA;AAAtB,GAAP;AACD,CAjCD;;AAmCA,eAAe;AACbQ,MAAI,EAAE,OADO;AAEbG,YAAU,EAAE;AACVnB,SAAK,EAALA;AADU,GAFC;AAKb;AACAoB,OANa,mBAML;AACN,0BAAqCnB,cAAc,EAAnD;AAAA,QAAQoB,IAAR,mBAAQA,IAAR;AAAA,QAAcC,OAAd,mBAAcA,OAAd;AAAA,QAAuBnB,SAAvB,mBAAuBA,SAAvB;;AACA,0BAA4CD,cAAc,CAACC,SAAD,CAA1D;AAAA,QAAQG,QAAR,mBAAQA,QAAR;AAAA,QAAkBC,QAAlB,mBAAkBA,QAAlB;AAAA,QAA4BC,WAA5B,mBAA4BA,WAA5B;;AACA,WAAO;AAAEF,cAAQ,EAARA,QAAF;AAAYC,cAAQ,EAARA,QAAZ;AAAsBc,UAAI,EAAJA,IAAtB;AAA4BC,aAAO,EAAPA,OAA5B;AAAqCd,iBAAU,EAAVA;AAArC,KAAP;AACD;AAVY,CAAf","names":["useRouter","reactive","toRefs","post","Toast","useToastEffect","useLoginEffect","showToast","router","loginMessage","username","password","handleLogin","value","result","errno","localStorage","isLogin","setTimeout","push","name","console","log","components","setup","show","content"],"sourceRoot":"","sources":["C:\\Users\\52919\\Desktop\\jd_lqs\\src\\views\\Login\\Login.vue"],"sourcesContent":["<template>\r\n  <div class=\"loginLayout\">\r\n    <div class=\"userLogo\">\r\n      <img src=\"http://www.dell-lee.com/imgs/vue3/user.png\" alt=\"\" />\r\n    </div>\r\n\r\n    <div class=\"loginMessage\">\r\n      <input\r\n        type=\"text\"\r\n        class=\"username\"\r\n        placeholder=\"请输入用户名\"\r\n        v-model=\"username\"\r\n        autocomplete=\"new-password\"\r\n      />\r\n      <input\r\n        type=\"password\"\r\n        class=\"pwd\"\r\n        placeholder=\"请输入密码\"\r\n        v-model=\"password\"\r\n        autocomplete=\"new-password\"\r\n      />\r\n      <button class=\"submit\" @click=\"handleLogin\">登录</button>\r\n      <div class=\"loginLink\">\r\n        <router-link :to=\"{ name: 'Register' }\">\r\n          <span class=\"loginLink__item\">立即注册</span>\r\n        </router-link>\r\n        <span class=\"gapLine\">|</span>\r\n        <span class=\"loginLink__item\">忘记密码</span>\r\n      </div>\r\n    </div>\r\n\r\n    <transition\r\n      :duration=\"{ enter: 0, leave: 0 }\"\r\n      enter-active-class=\"animate__animated animate__fadeIn\"\r\n      leave-active-class=\"animate__animated animate__fadeOut\"\r\n    >\r\n      <Toast v-if=\"show\" :content=\"content\" />\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRouter } from \"vue-router\"; // 路由插件\r\nimport { reactive, toRefs } from \"@vue/reactivity\";\r\nimport { post } from \"../../utils/request\"; // axios请求函数\r\nimport Toast, { useToastEffect } from \"../../components/Toast\"; // 自定义弹窗\r\n// import 'animate.css'\r\n\r\n// 处理登录\r\nconst useLoginEffect = (showToast) => {\r\n  const router = useRouter();\r\n  const loginMessage = reactive({ username: \"\", password: \"\" });\r\n  const { username, password } = toRefs(loginMessage);\r\n\r\n  const handleLogin = async () => {\r\n    // 用户名、密码验证\r\n    // let userVerify | pwdVerify = /^[a-zA-Z0-9_-]{11,16}$/;\r\n    if (username.value === '') {\r\n      showToast(\"请输入用户名!\");\r\n      return;\r\n    }\r\n    if (password.value === '') {\r\n      showToast(\"请输入密码!\");\r\n      return;\r\n    }\r\n    try {\r\n      const result = await post(\"/user/login\", loginMessage);\r\n      if (result?.errno === 0) {\r\n        showToast(\"登录成功!\");\r\n        localStorage.isLogin = true;\r\n        setTimeout(() => {\r\n          router.push({ name: \"Home\" });\r\n        }, 800);\r\n      } else {\r\n        showToast(\"登录失败!\");\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n      showToast(\"请求失败!\");\r\n    }\r\n  };\r\n  return { username, password, handleLogin };\r\n};\r\n\r\nexport default {\r\n  name: \"Login\",\r\n  components: {\r\n    Toast,\r\n  },\r\n  // setup的职责：了解代码执行的一个流程\r\n  setup() {\r\n    const { show, content, showToast } = useToastEffect();\r\n    const { username, password, handleLogin } = useLoginEffect(showToast);\r\n    return { username, password, show, content, handleLogin };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../style/viriables.scss\";\r\n.loginLayout {\r\n  padding: 1.2rem 0.4rem 0;\r\n  .userLogo {\r\n    margin: 0 auto 0.4rem;\r\n    width: 0.66rem;\r\n    height: 0.66rem;\r\n    img {\r\n      width: 100%;\r\n    }\r\n  }\r\n  .loginMessage {\r\n    .username,\r\n    .pwd {\r\n      margin-bottom: 0.16rem;\r\n      padding-left: 0.16rem;\r\n      width: 100%;\r\n      height: 0.48rem;\r\n      background: #f9f9f9;\r\n      border: 1px solid rgba(0, 0, 0, 0.1);\r\n      outline-color: $outLine-color;\r\n      border-radius: 0.06rem;\r\n      &::placeholder {\r\n        font-weight: 500;\r\n        font-size: 0.16rem;\r\n        color: $color;\r\n        letter-spacing: 0;\r\n        line-height: 24px;\r\n      }\r\n    }\r\n    .pwd {\r\n      margin-bottom: 0.32rem;\r\n    }\r\n    .submit {\r\n      margin-bottom: 0.16rem;\r\n      width: 2.95rem;\r\n      height: 0.48rem;\r\n      line-height: 24px;\r\n      text-align: center;\r\n      font-size: 0.16rem;\r\n      background: $outLine-color;\r\n      color: #ffffff;\r\n      border: 0;\r\n      border-radius: 0.06rem;\r\n    }\r\n    .loginLink {\r\n      text-align: center;\r\n      font-size: 0.14rem;\r\n      color: $color;\r\n      .gapLine {\r\n        margin: 0 0.12rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}